clusterEnv: local

# Used for Infisical projectSlug in prod.
projectName: ""

instance:
  enabled: true
  name: openclaw
  envFromSecretName: openclaw-secrets

  # Opt-in OpenClaw image auto-update (handled by the operator).
  # See: https://github.com/OpenClaw-rocks/k8s-operator#auto-update
  autoUpdate:
    enabled: true
    checkInterval: "24h"
    backupBeforeUpdate: true
    rollbackOnFailure: true
    healthCheckTimeout: "10m"

  configRaw:
    gateway:
      bind: lan

    agents:
      defaults:
        models:
          "openai-codex/gpt-5.2-codex":
            alias: codex
        model:
          primary: "openai-codex/gpt-5.2-codex"

    channels:
      whatsapp:
        dmPolicy: "allowlist"
        # OpenClaw config supports env interpolation (same mechanism as OPENCLAW_GATEWAY_TOKEN).
        # The value comes from secret/openclaw-secrets as OPENCLAW_OWNER_PHONE.
        allowFrom:
          - "${OPENCLAW_OWNER_PHONE}"

    tools:
      profile: "full"
      web:
        fetch:
          enabled: true
          # Optional Firecrawl fallback for better extraction.
          # Disabled until: https://github.com/openclaw/openclaw/issues/20442
          # firecrawl:
            # apiKey: "${FIRECRAWL_API_KEY}"
            # baseUrl: "https://api.firecrawl.dev"

        search:
          enabled: true
          provider: "perplexity"
          maxResults: 6
          perplexity:
            # Uses PERPLEXITY_API_KEY from the environment unless apiKey is set here.
            baseUrl: "https://api.perplexity.ai"
            model: "perplexity/sonar-pro"

      skills:
        load:
          extraDirs:
          - "/home/openclaw/.openclaw/workspace/skills"
      
      commands:
        native: "auto"
        nativeSkills: "auto"
        bash: true
        config: true

  storage:
    persistence:
      enabled: true
      size: 10Gi

  chromium:
    enabled: true
    image:
      repository: ghcr.io/browserless/chromium
      tag: "v2.40.0"
    resources:
      requests:
        cpu: "250m"
        memory: "512Mi"
      limits:
        cpu: "1000m"
        memory: "2Gi"

  networking:
    ingress:
      enabled: false
      className: ""
      annotations: {}
      security:
        forceHTTPS: true
        enableHSTS: true
      hosts: []

  security:
    networkPolicy:
      allowedIngressNamespaces: []

infisical:
  # Only enabled in prod via mise tasks.
  enabled: false
